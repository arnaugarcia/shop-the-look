<div class="tab-pane">
  <stl-alert></stl-alert>
  <stl-alert-error></stl-alert-error>
  <form (ngSubmit)="save()" [formGroup]="preferencesForm" class="mb-2" name="preferencesForm">
    <div class="row">
      <div class="col-12">
        <h2>Preferences</h2>
      </div>
      <div class="col-lg-4 col-md-6">
        <div class="form-group">
          <label for="url">Feed URL</label>
          <input class="form-control" formControlName="url" id="url" name="url" placeholder="https://feed.acme.inc/feed.php" type="text" />
        </div>
      </div>
      <div class="col-lg-4 col-md-6">
        <div class="form-group">
          <label for="importMethod">Import Method</label>
          <select class="form-control" data-cy="importMethod" formControlName="importMethod" id="importMethod" name="importMethod">
            <option [ngValue]="null">Select an option</option>
            <option value="CSV">CSV</option>
            <option value="TSV">TSV</option>
            <option value="XML">FEED</option>
          </select>
        </div>
      </div>
      <div class="col-12 d-flex flex-sm-row flex-column mt-2">
        <button [disabled]="preferencesForm.invalid" class="btn btn-primary mb-1 mb-sm-0 mr-0 mr-sm-1" rippleEffect type="submit">
          Save Changes
        </button>
      </div>
    </div>
  </form>
  <hr />
  <div *ngIf="preferences" class="row mt-2">
    <div class="col-12">
      <h2>Last import data</h2>
      <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span>Remaining imports</span>
          <span
            [class.badge-danger]="preferences.remainingImports! <= 0"
            [class.badge-primary]="preferences.remainingImports! > 0"
            class="badge badge-pill"
            >{{ preferences.remainingImports }}</span
          >
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span>Last person to update the products</span>
          <span class="badge badge-primary badge-pill">{{ preferences.lastImportBy }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <span>last time that the products were updated</span>
          <span class="badge badge-primary badge-pill">{{ preferences.lastImportTimestamp }}</span>
        </li>
      </ul>
    </div>
  </div>
</div>
